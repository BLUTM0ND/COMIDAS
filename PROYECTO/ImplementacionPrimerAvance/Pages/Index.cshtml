@page
@using FoodApp.PrimerAvance.Pages
@model IndexModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Inicio - App de Comidas";
}

<div class="container">
    <h1 class="text-center my-4">Bienvenido a la App de Pedidos de Comida</h1>
    <p class="text-center">Explora restaurantes y realiza pedidos fácilmente.</p>

    <h2>Restaurantes Disponibles</h2>
    <div class="row">
        @foreach (var restaurante in Model.Restaurantes)
        {
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">@restaurante.NombreComercial</h5>
                        <p class="card-text">Calificación: @restaurante.Calificacion ★</p>
                        <p class="card-text">Tiempo de entrega: @restaurante.TiempoEntrega min</p>
                        <button class="btn btn-primary" onclick="verMenu('@restaurante.Id')">Ver Menú</button>
                    </div>
                </div>
            </div>
        }
    </div>

    <div id="menuContainer" style="display:none;">
        <h2>Menú del Restaurante</h2>
        <div id="productos" class="row"></div>
    </div>
</div>

@section Scripts {
    <script>
        function verMenu(restauranteId) {
            // Simulación de carga de menú (en producción, sería una API call)
            const productos = [
                { nombre: 'Pizza Margherita', precio: 15.99, descripcion: 'Pizza clásica con queso y tomate' },
                { nombre: 'Hamburguesa', precio: 12.50, descripcion: 'Hamburguesa con papas' },
                { nombre: 'Ensalada César', precio: 8.99, descripcion: 'Ensalada fresca con aderezo' }
            ];
            const container = document.getElementById('productos');
            container.innerHTML = '';
            productos.forEach(p => {
                container.innerHTML += `
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="card-title">${p.nombre}</h6>
                                <p class="card-text">${p.descripcion}</p>
                                <p class="card-text"><strong>S/ ${p.precio}</strong></p>
                                <button class="btn btn-success" onclick="agregarAlCarrito('${p.nombre}', ${p.precio})">Agregar al Carrito</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('menuContainer').style.display = 'block';
        }

        function agregarAlCarrito(nombre, precio) {
            alert(`Agregado: ${nombre} - S/ ${precio}`);
            // Aquí iría la lógica para agregar al carrito (usando JS o enviando a backend)
        }
    </script>
}